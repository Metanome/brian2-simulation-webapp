<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BrianSim Web</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>ðŸ§  Brian2 Simulation</h1>

        <form action="/simulate" method="POST">
            <label for="preset">Preset:</label>
            <select id="preset" onchange="applyPreset(this.value)">
                <option value="">-- Select a Preset --</option>
                <option value="1.0,0.0,100">Default LIF</option>
                <option value="0.8,0.2,200">Quick Decay</option>
                <option value="1.2,0.0,500">Long Run</option>
            </select>

            <label for="threshold">Threshold:</label>
            <input type="text" id="threshold" name="threshold" value="{{ threshold or 1.0 }}">

            <label for="reset">Reset:</label>
            <input type="text" id="reset" name="reset" value="{{ reset or 0.0 }}">

            <label for="sim_time">Simulation Time (ms):</label>
            <input type="text" id="sim_time" name="sim_time" value="{{ sim_time or 100 }}">

            <button type="submit">Run Simulation</button>
        </form>

        {% if img_url %}
        <div class="output">
            <h2>ðŸ“Š Output</h2>
            <img src="{{ img_url }}" alt="Simulation Output">
            <a href="{{ img_url }}" download="simulation_output.png">Download Image</a>
        </div>
        {% endif %}
    </div>

    <script>
        function applyPreset(val) {
            if (!val) return;
            const [th, r, sim] = val.split(',');
            document.getElementById('threshold').value = th;
            document.getElementById('reset').value = r;
            document.getElementById('sim_time').value = sim;
        }
    </script>
</body>
</html>
